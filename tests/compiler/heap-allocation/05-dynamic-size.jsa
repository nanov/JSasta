// jastat-summary: Heap allocation with dynamic size expression
// jastat: mode=run, capture=assert

import io from @io;
import t from @test;

let size: i32 = 5;
let arr = new i32[size];

arr[0] = 1;
arr[1] = 2;
arr[2] = 3;
arr[3] = 4;
arr[4] = 5;

// io.println("Allocated array of size {}", size);
// io.println("Values: {}, {}, {}, {}, {}", arr[0], arr[1], arr[2], arr[3], arr[4]);

t.assert.equals(5, size);
t.assert.equals(1, arr[0]);
t.assert.equals(2, arr[1]);
t.assert.equals(3, arr[2]);
t.assert.equals(4, arr[3]);
t.assert.equals(5, arr[4]);

delete arr;

// jastat-summary: Struct methods and self parameter
// jastat: mode=run, capture=assert

import io from @io;
import t from @test;

struct Counter {
    value: i32;
}

function increment(self: ref Counter): void {
    self.value = self.value + 1;
}

function get_value(self: Counter): i32 {
    return self.value;
}

var c: Counter;
c.value = 0;

increment(ref c);
increment(ref c);

// io.println("Counter value: {}", get_value(c));
t.assert.equals(2, get_value(c));
